# –û–±–∑–æ—Ä –ø–∞–∫–µ—Ç–∞ unique –≤ Go

## –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞–∫–µ—Ç unique?

–ü–∞–∫–µ—Ç `unique` –ø–æ—è–≤–∏–ª—Å—è –≤ Go 1.23 –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è **–∫–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π** (—Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –∫–∞–∫ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —Ö—ç—à-–∫–æ–Ω—Å–∏–Ω–≥). –≠—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –≤—Å–µ —Ä–∞–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏.

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. Handle[T]
```go
handle := unique.Make("example")
value := handle.Value() // –ø–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ
```

- `Handle[T]` - —ç—Ç–æ –æ–ø–∞–∫–Ω—ã–π —Ç–∏–ø, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ
- –î–≤–∞ Handle —Ä–∞–≤–Ω—ã —Ç–æ–≥–¥–∞ –∏ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ä–∞–≤–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Handle'–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π (O(1))

### 2. –§—É–Ω–∫—Ü–∏—è Make[T]
```go
func Make[T comparable](value T) Handle[T]
```

- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–µ —Å—Ä–∞–≤–Ω–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç Handle –¥–ª—è –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–π –∫–æ–ø–∏–∏ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞ –∏ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –∏–∑ –ª—é–±—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **4-7x –±—ã—Å—Ç—Ä–µ–µ** —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–ª—è —Å—Ç—Ä–æ–∫ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Handle'–æ–≤ = —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞—Ä—Ç–∞—Ö

### üíæ –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –û—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–∞—Ö
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü–æ–ª–Ω–∞—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### 1. –°–∏—Å—Ç–µ–º—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (RBAC)
```go
type Permission struct { Resource, Action string }
adminPerm := unique.Make(Permission{"*", "*"})
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
```go
localhost := unique.Make("localhost")
prodDB := unique.Make("production_db")
// –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
```

### 3. –ü–∞—Ä—Å–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
```go
// –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∫–ª—é—á–µ–π JSON, XML –∞—Ç—Ä–∏–±—É—Ç–æ–≤
keyHandle := unique.Make(JSONKey{Path: "user", Key: "name"})
```

### 4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```go
cache := make(map[unique.Handle[string]]Result)
// –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π
```

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ß–∞—Å—Ç—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –î–∞–Ω–Ω—ã–µ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∫–∞–∫ –∫–ª—é—á–µ–π –∫–∞—Ä—Ç
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏

### ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –†–µ–¥–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (int, bool)

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –Ω–∞—à–∏—Ö —Ç–µ—Å—Ç–æ–≤:

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–±—ã—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ | Handle —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------------------|------------------|-----------|
| –í—Ä–µ–º—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ | 2.15 –Ω—Å | 0.31 –Ω—Å | **6.9x** |
| –°—Ä–∞–≤–Ω–µ–Ω–∏—è/—Å–µ–∫ | ~465M | ~3.2B | **6.9x** |
| –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ | –ë–∞–∑–æ–≤–æ–µ | -30-60% | –ü—Ä–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞—Ö |

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–∞–∫–µ—Ç `unique` - —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Go, –æ—Å–æ–±–µ–Ω–Ω–æ —Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è –¥–∞–Ω–Ω—ã–º–∏. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π API –¥–ª—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–π –∏ —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `unique` —Ç–∞–º, –≥–¥–µ –µ—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ —á–∞—Å—Ç—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è. –í —Ç–∞–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –≤—ã–≥–æ–¥–∞ –±—É–¥–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π.