{"batches":[{"resource":{"attributes":[{"key":"telemetry.sdk.language","value":{"stringValue":"cpp"}},{"key":"telemetry.sdk.name","value":{"stringValue":"opentelemetry"}},{"key":"telemetry.sdk.version","value":{"stringValue":"1.18.0"}},{"key":"service.name","value":{"stringValue":"nginx-ingress"}}],"droppedAttributesCount":0},"instrumentationLibrarySpans":[{"spans":[{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"767397017a43b60d","parentSpanId":"","traceState":"","name":"HTTP POST shortlink-link-bff /api/links","kind":"SPAN_KIND_SERVER","startTimeUnixNano":1764268114984804000,"endTimeUnixNano":1764268115206314500,"attributes":[{"key":"http.flavor","value":{"stringValue":"2.0"}},{"key":"http.target","value":{"stringValue":"/api/links"}},{"key":"http.server_name","value":{"stringValue":"shortlink.best"}},{"key":"http.host","value":{"stringValue":"shortlink.best"}},{"key":"http.user_agent","value":{"stringValue":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36"}},{"key":"http.scheme","value":{"stringValue":"https"}},{"key":"net.host.port","value":{"intValue":443}},{"key":"net.peer.ip","value":{"stringValue":"172.71.102.54"}},{"key":"net.peer.port","value":{"intValue":9310}},{"key":"ingress.namespace","value":{"stringValue":"shortlink-link"}},{"key":"ingress.service_name","value":{"stringValue":"shortlink-link-bff"}},{"key":"ingress.name","value":{"stringValue":"shortlink-link-bff"}},{"key":"ingress.upstream","value":{"stringValue":"shortlink-link-shortlink-link-bff-7070"}},{"key":"http.method","value":{"stringValue":"POST"}},{"key":"http.status_code","value":{"intValue":201}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}}],"instrumentationLibrary":{"name":"nginx","version":""}}]},{"resource":{"attributes":[{"key":"host.name","value":{"stringValue":"shortlink-link-link-7768c589fc-dw7w5"}},{"key":"os.description","value":{"stringValue":"Alpine Linux 3.22.2 (Linux shortlink-link-link-7768c589fc-dw7w5 6.12.57-talos #1 SMP Wed Nov  5 12:59:35 UTC 2025 x86_64)"}},{"key":"os.type","value":{"stringValue":"linux"}},{"key":"process.command_args","value":{"stringValue":"[\"./app\"]"}},{"key":"process.executable.name","value":{"stringValue":"app"}},{"key":"process.executable.path","value":{"stringValue":"/app/app"}},{"key":"process.owner","value":{"stringValue":"golang"}},{"key":"process.pid","value":{"intValue":7}},{"key":"process.runtime.description","value":{"stringValue":"go version go1.25.4 X:arenas,cgocheck2,newinliner,rangefunc,jsonv2,greenteagc linux/amd64"}},{"key":"process.runtime.name","value":{"stringValue":"go"}},{"key":"process.runtime.version","value":{"stringValue":"go1.25.4 X:arenas,cgocheck2,newinliner,rangefunc,jsonv2,greenteagc"}},{"key":"service.version","value":{"stringValue":""}},{"key":"telemetry.sdk.language","value":{"stringValue":"go"}},{"key":"telemetry.sdk.name","value":{"stringValue":"opentelemetry"}},{"key":"telemetry.sdk.version","value":{"stringValue":"1.38.0"}},{"key":"service.name","value":{"stringValue":"shortlink-link"}}],"droppedAttributesCount":0},"instrumentationLibrarySpans":[{"spans":[{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"47beef2fbbcec262","parentSpanId":"bf1086acf6d79d34","traceState":"","name":"link.link.created.v1 receive","kind":"SPAN_KIND_CONSUMER","startTimeUnixNano":1764268115106455000,"endTimeUnixNano":1764268115106485500,"attributes":[{"key":"messaging.system","value":{"stringValue":"kafka"}},{"key":"messaging.destination.kind","value":{"stringValue":"topic"}},{"key":"messaging.destination.name","value":{"stringValue":"link.link.created.v1"}},{"key":"messaging.operation","value":{"stringValue":"receive"}},{"key":"messaging.message.id","value":{"stringValue":"2"}},{"key":"messaging.kafka.source.partition","value":{"intValue":0}},{"key":"pyroscope.profile.id","value":{"stringValue":"47beef2fbbcec262"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"bf1086acf6d79d34","parentSpanId":"93006e1683b723fa","traceState":"","name":"link.link.created.v1 publish","kind":"SPAN_KIND_PRODUCER","startTimeUnixNano":1764268115100452900,"endTimeUnixNano":1764268115106603500,"attributes":[{"key":"messaging.system","value":{"stringValue":"kafka"}},{"key":"messaging.destination.kind","value":{"stringValue":"topic"}},{"key":"messaging.destination.name","value":{"stringValue":"link.link.created.v1"}},{"key":"messaging.message.payload_size_bytes","value":{"intValue":748}},{"key":"messaging.operation","value":{"stringValue":"publish"}},{"key":"pyroscope.profile.id","value":{"stringValue":"bf1086acf6d79d34"}},{"key":"messaging.message.id","value":{"stringValue":"2"}},{"key":"messaging.kafka.destination.partition","value":{"intValue":0}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"c49f058f3952a7d2","parentSpanId":"93006e1683b723fa","traceState":"","name":"watermill.publish","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115100413200,"endTimeUnixNano":1764268115106650600,"attributes":[{"key":"topic","value":{"stringValue":"link.link.created.v1"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"93006e1683b723fa","parentSpanId":"2beddccefb661b32","traceState":"","name":"saga: SAGA_STEP_PUBLISH_EVENT_NEW_LINK","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115100015000,"endTimeUnixNano":1764268115106791400,"attributes":[{"key":"step","value":{"stringValue":"SAGA_STEP_PUBLISH_EVENT_NEW_LINK"}},{"key":"status","value":{"stringValue":"run"}},{"key":"link.hash","value":{"stringValue":"50dec21fa68cf10"}},{"key":"user.id","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}},{"key":"event_type","value":{"stringValue":"link.link.created.v1"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""},"events":[{"timeUnixNano":1764268115106665700,"attributes":[{"key":"log.severity","value":{"stringValue":"ERROR"}},{"key":"log.message","value":{"stringValue":"Link creation event published successfully"}},{"key":"event_type","value":{"stringValue":"link.link.created.v1"}},{"key":"link_hash","value":{"stringValue":"50dec21fa68cf10"}}],"droppedAttributesCount":0,"name":"log.ERROR"}]},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"2beddccefb661b32","parentSpanId":"33fc115656fdee93","traceState":"","name":"saga: SAGA_STEP_PUBLISH_EVENT_NEW_LINK","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115099983400,"endTimeUnixNano":1764268115106794500,"attributes":[{"key":"step","value":{"stringValue":"SAGA_STEP_PUBLISH_EVENT_NEW_LINK"}},{"key":"status","value":{"stringValue":"run"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"993d90f92ca98a6e","parentSpanId":"b7269f01c100fd68","traceState":"","name":"connect","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115100139800,"endTimeUnixNano":1764268115113726200,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"b7269f01c100fd68","parentSpanId":"948d179f5d6b86a4","traceState":"","name":"pool.acquire","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115100075300,"endTimeUnixNano":1764268115113794000,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"034769e084304a4a","parentSpanId":"d5de4f24caa8a9b2","traceState":"","name":"prepare INSERT INTO link.links (url,hash,describe,json) VALUES ($1,$2,$3,$4)","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115113856800,"endTimeUnixNano":1764268115114783200,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.operation.name","value":{"stringValue":"INSERT"}},{"key":"db.query.text","value":{"stringValue":"INSERT INTO link.links (url,hash,describe,json) VALUES ($1,$2,$3,$4)"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"d5de4f24caa8a9b2","parentSpanId":"948d179f5d6b86a4","traceState":"","name":"query INSERT INTO link.links (url,hash,describe,json) VALUES ($1,$2,$3,$4)","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115113842700,"endTimeUnixNano":1764268115117119200,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.query.text","value":{"stringValue":"INSERT INTO link.links (url,hash,describe,json) VALUES ($1,$2,$3,$4)"}},{"key":"db.operation.name","value":{"stringValue":"INSERT"}},{"key":"pgx.query.parameters","value":{"stringValue":"[\"https://shortlink.best/next/add-link/\",\"50dec21fa68cf10\",\"\",\"{\\\"created_at\\\":{\\\"seconds\\\":1764268115,\\\"nanos\\\":99766381},\\\"updated_at\\\":{\\\"seconds\\\":1764268115,\\\"nanos\\\":99766481},\\\"url\\\":\\\"https://shortlink.best/next/add-link/\\\",\\\"hash\\\":\\\"50dec21fa68cf10\\\",\\\"describe\\\":\\\"\\\"}\"]"}},{"key":"pgx.rows_affected","value":{"intValue":1}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"948d179f5d6b86a4","parentSpanId":"d6bdc342eae3cb9f","traceState":"","name":"saga: SAGA_STEP_SAVE_TO_STORE","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115099911400,"endTimeUnixNano":1764268115117135000,"attributes":[{"key":"step","value":{"stringValue":"SAGA_STEP_SAVE_TO_STORE"}},{"key":"status","value":{"stringValue":"run"}},{"key":"link.hash","value":{"stringValue":"50dec21fa68cf10"}},{"key":"user.id","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"d6bdc342eae3cb9f","parentSpanId":"33fc115656fdee93","traceState":"","name":"saga: SAGA_STEP_SAVE_TO_STORE","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115099906000,"endTimeUnixNano":1764268115117138700,"attributes":[{"key":"step","value":{"stringValue":"SAGA_STEP_SAVE_TO_STORE"}},{"key":"status","value":{"stringValue":"run"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"081557624b2fa556","parentSpanId":"1e29e0d787ac58ab","traceState":"","name":"ResolveOutgoingUserID","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115117291300,"endTimeUnixNano":1764268115117311000,"attributes":[{"key":"auth.user_id.source","value":{"stringValue":"context"}},{"key":"auth.user_id","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"40ee0bc9a4a8927a","parentSpanId":"081557624b2fa556","traceState":"","name":"authzed.api.v1.PermissionsService/WriteRelationships","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115120440600,"endTimeUnixNano":1764268115197883600,"attributes":[{"key":"rpc.method","value":{"stringValue":"WriteRelationships"}},{"key":"rpc.system","value":{"stringValue":"grpc"}},{"key":"server.address","value":{"stringValue":"10.98.245.83"}},{"key":"server.port","value":{"intValue":50051}},{"key":"rpc.grpc.status_code","value":{"intValue":0}},{"key":"rpc.service","value":{"stringValue":"authzed.api.v1.PermissionsService"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""},"events":[{"timeUnixNano":1764268115187417900,"attributes":[{"key":"rpc.message.type","value":{"stringValue":"SENT"}},{"key":"rpc.message.id","value":{"intValue":1}},{"key":"rpc.message.compressed_size","value":{"intValue":87}},{"key":"rpc.message.uncompressed_size","value":{"intValue":87}}],"droppedAttributesCount":0,"name":"message"},{"timeUnixNano":1764268115197872400,"attributes":[{"key":"rpc.message.type","value":{"stringValue":"RECEIVED"}},{"key":"rpc.message.id","value":{"intValue":1}},{"key":"rpc.message.compressed_size","value":{"intValue":36}},{"key":"rpc.message.uncompressed_size","value":{"intValue":36}}],"droppedAttributesCount":0,"name":"message"}]},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"b5a7353ad491c882","parentSpanId":"7763dfbe6da69c4b","traceState":"","name":"infrastructure.rpc.link.v1.LinkService/Add","kind":"SPAN_KIND_SERVER","startTimeUnixNano":1764268115099422000,"endTimeUnixNano":1764268115198214400,"attributes":[{"key":"rpc.method","value":{"stringValue":"Add"}},{"key":"rpc.system","value":{"stringValue":"grpc"}},{"key":"rpc.request","value":{"stringValue":"infrastructure.rpc.link.v1.AddRequest"}},{"key":"rpc.response","value":{"stringValue":"infrastructure.rpc.link.v1.AddResponse"}},{"key":"server.address","value":{"stringValue":"127.0.0.6"}},{"key":"server.port","value":{"intValue":42345}},{"key":"rpc.grpc.status_code","value":{"intValue":0}},{"key":"rpc.service","value":{"stringValue":"infrastructure.rpc.link.v1.LinkService"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"1e29e0d787ac58ab","parentSpanId":"eb30af017b40c2c6","traceState":"","name":"authzed.api.v1.PermissionsService/WriteRelationships","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115117240000,"endTimeUnixNano":1764268115198006300,"attributes":[{"key":"rpc.system","value":{"stringValue":"grpc"}},{"key":"rpc.method","value":{"stringValue":"WriteRelationships"}},{"key":"link.hash","value":{"stringValue":"50dec21fa68cf10"}},{"key":"user.id","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}},{"key":"permission.already_exists","value":{"boolValue":false}},{"key":"grpc.code","value":{"stringValue":"OK"}},{"key":"rpc.service","value":{"stringValue":"authzed.api.v1.PermissionsService"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"eb30af017b40c2c6","parentSpanId":"7e8260e6f53edd18","traceState":"","name":"saga: SAGA_STEP_ADD_PERMISSION","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115117222000,"endTimeUnixNano":1764268115198017500,"attributes":[{"key":"step","value":{"stringValue":"SAGA_STEP_ADD_PERMISSION"}},{"key":"status","value":{"stringValue":"run"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"7e8260e6f53edd18","parentSpanId":"3f7e6cdc0ccaf34a","traceState":"","name":"saga: ADD_LINK","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115117176300,"endTimeUnixNano":1764268115198050300,"attributes":[{"key":"saga","value":{"stringValue":"ADD_LINK"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"33fc115656fdee93","parentSpanId":"3f7e6cdc0ccaf34a","traceState":"","name":"saga: ADD_LINK","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115099846700,"endTimeUnixNano":1764268115198052900,"attributes":[{"key":"saga","value":{"stringValue":"ADD_LINK"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"3f7e6cdc0ccaf34a","parentSpanId":"b5a7353ad491c882","traceState":"","name":"ResolveUserIdentity","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115099677000,"endTimeUnixNano":1764268115198109400,"attributes":[{"key":"pyroscope.profile.id","value":{"stringValue":"3f7e6cdc0ccaf34a"}},{"key":"rpc.system","value":{"stringValue":"grpc"}},{"key":"rpc.method","value":{"stringValue":"Add"}},{"key":"auth.user_id.metadata","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}},{"key":"auth.user_id.source","value":{"stringValue":"metadata"}},{"key":"auth.user_id","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}},{"key":"enduser.id","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}},{"key":"rpc.grpc.status_code","value":{"intValue":0}},{"key":"rpc.service","value":{"stringValue":"infrastructure.rpc.link.v1.LinkService"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}}],"instrumentationLibrary":{"name":"go.opentelemetry.io/contrib/instrumentation/github.com/IBM/sarama/otelsarama","version":"0.43.0"}}]},{"resource":{"attributes":[{"key":"host.name","value":{"stringValue":"shortlink-link-bff-568f75c88c-kr82j"}},{"key":"os.description","value":{"stringValue":"Alpine Linux 3.22.2 (Linux shortlink-link-bff-568f75c88c-kr82j 6.12.57-talos #1 SMP Wed Nov  5 12:59:35 UTC 2025 x86_64)"}},{"key":"os.type","value":{"stringValue":"linux"}},{"key":"process.command_args","value":{"stringValue":"[\"./app\"]"}},{"key":"process.executable.name","value":{"stringValue":"app"}},{"key":"process.executable.path","value":{"stringValue":"/app/app"}},{"key":"process.owner","value":{"stringValue":"golang"}},{"key":"process.pid","value":{"intValue":7}},{"key":"process.runtime.description","value":{"stringValue":"go version go1.25.4 X:arenas,cgocheck2,newinliner,rangefunc,jsonv2,greenteagc linux/amd64"}},{"key":"process.runtime.name","value":{"stringValue":"go"}},{"key":"process.runtime.version","value":{"stringValue":"go1.25.4 X:arenas,cgocheck2,newinliner,rangefunc,jsonv2,greenteagc"}},{"key":"service.version","value":{"stringValue":""}},{"key":"telemetry.sdk.language","value":{"stringValue":"go"}},{"key":"telemetry.sdk.name","value":{"stringValue":"opentelemetry"}},{"key":"telemetry.sdk.version","value":{"stringValue":"1.38.0"}},{"key":"service.name","value":{"stringValue":"shortlink-bff-link"}}],"droppedAttributesCount":0},"instrumentationLibrarySpans":[{"spans":[{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"06f15fbffba2f95c","parentSpanId":"767397017a43b60d","traceState":"","name":"shortlink-bff-link","kind":"SPAN_KIND_SERVER","startTimeUnixNano":1764268115084857000,"endTimeUnixNano":1764268115204472300,"attributes":[{"key":"server.address","value":{"stringValue":"shortlink.best"}},{"key":"http.request.method","value":{"stringValue":"POST"}},{"key":"url.scheme","value":{"stringValue":"http"}},{"key":"network.peer.address","value":{"stringValue":"172.71.102.54"}},{"key":"user_agent.original","value":{"stringValue":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36"}},{"key":"client.address","value":{"stringValue":"172.71.102.54"}},{"key":"url.path","value":{"stringValue":"/api/links"}},{"key":"network.protocol.version","value":{"stringValue":"1.1"}},{"key":"http.request.body.size","value":{"intValue":61}},{"key":"http.response.body.size","value":{"intValue":179}},{"key":"http.response.status_code","value":{"intValue":201}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"6cf165faee2fe67f","parentSpanId":"06f15fbffba2f95c","traceState":"","name":"ResolveOutgoingUserID","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115085101600,"endTimeUnixNano":1764268115085125600,"attributes":[{"key":"auth.user_id.source","value":{"stringValue":"session"}},{"key":"auth.user_id","value":{"stringValue":"77e8d776-2937-4143-8f56-9ae814b92a46"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"7763dfbe6da69c4b","parentSpanId":"6cf165faee2fe67f","traceState":"","name":"infrastructure.rpc.link.v1.LinkService/Add","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115091892700,"endTimeUnixNano":1764268115204268300,"attributes":[{"key":"rpc.method","value":{"stringValue":"Add"}},{"key":"rpc.system","value":{"stringValue":"grpc"}},{"key":"server.address","value":{"stringValue":"10.98.245.83"}},{"key":"server.port","value":{"intValue":50051}},{"key":"rpc.grpc.status_code","value":{"intValue":0}},{"key":"rpc.service","value":{"stringValue":"infrastructure.rpc.link.v1.LinkService"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""},"events":[{"timeUnixNano":1764268115093236500,"attributes":[{"key":"rpc.message.type","value":{"stringValue":"SENT"}},{"key":"rpc.message.id","value":{"intValue":1}},{"key":"rpc.message.compressed_size","value":{"intValue":41}},{"key":"rpc.message.uncompressed_size","value":{"intValue":41}}],"droppedAttributesCount":0,"name":"message"},{"timeUnixNano":1764268115204253000,"attributes":[{"key":"rpc.message.type","value":{"stringValue":"RECEIVED"}},{"key":"rpc.message.id","value":{"intValue":1}},{"key":"rpc.message.compressed_size","value":{"intValue":84}},{"key":"rpc.message.uncompressed_size","value":{"intValue":84}}],"droppedAttributesCount":0,"name":"message"}]}],"instrumentationLibrary":{"name":"go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp","version":"0.63.0"}}]},{"resource":{"attributes":[{"key":"telemetry.sdk.language","value":{"stringValue":"go"}},{"key":"telemetry.sdk.name","value":{"stringValue":"opentelemetry"}},{"key":"telemetry.sdk.version","value":{"stringValue":"1.38.0"}},{"key":"service.name","value":{"stringValue":"spicedb"}}],"droppedAttributesCount":0},"instrumentationLibrarySpans":[{"spans":[{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"54bb52f2a3e1818a","parentSpanId":"5f1033a143b05c16","traceState":"","name":"query BEGIN","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115189991400,"endTimeUnixNano":1764268115190223000,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.query.text","value":{"stringValue":"begin isolation level serializable"}},{"key":"db.operation.name","value":{"stringValue":"BEGIN"}},{"key":"pgx.rows_affected","value":{"intValue":0}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"8a28d7b85f353088","parentSpanId":"f73202f663873ddd","traceState":"","name":"query INSERT","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115190290000,"endTimeUnixNano":1764268115190830800,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.query.text","value":{"stringValue":"INSERT INTO relation_tuple_transaction (metadata) VALUES ($1) RETURNING xid, snapshot"}},{"key":"db.operation.name","value":{"stringValue":"INSERT"}},{"key":"pgx.rows_affected","value":{"intValue":1}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"cb0b5886f17e90be","parentSpanId":"6b4dbd91ad326b4e","traceState":"","name":"query SELECT","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115190942500,"endTimeUnixNano":1764268115191903000,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.query.text","value":{"stringValue":"SELECT serialized_config, created_xid FROM namespace_config WHERE deleted_xid = $1 AND (namespace = $2 OR namespace = $3)"}},{"key":"db.operation.name","value":{"stringValue":"SELECT"}},{"key":"pgx.rows_affected","value":{"intValue":2}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"62c54236c9047037","parentSpanId":"1e0ac69ebd77b037","traceState":"","name":"query SELECT","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115191963600,"endTimeUnixNano":1764268115192255500,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.query.text","value":{"stringValue":"SELECT serialized_config, created_xid FROM namespace_config WHERE deleted_xid = $1 AND (namespace = $2)"}},{"key":"db.operation.name","value":{"stringValue":"SELECT"}},{"key":"pgx.rows_affected","value":{"intValue":1}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"18dda21eb727c55c","parentSpanId":"1e0ac69ebd77b037","traceState":"","name":"query INSERT","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115192276200,"endTimeUnixNano":1764268115192667000,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.query.text","value":{"stringValue":"INSERT INTO relation_tuple (namespace,object_id,relation,userset_namespace,userset_object_id,userset_relation,caveat_name,caveat_context,expiration) VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) ON CONFLICT DO NOTHING RETURNING namespace, object_id, relation, userset_namespace, userset_object_id, userset_relation"}},{"key":"db.operation.name","value":{"stringValue":"INSERT"}},{"key":"pgx.rows_affected","value":{"intValue":0}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"ccfad31ac4a3a9b7","parentSpanId":"5f1033a143b05c16","traceState":"","name":"query COMMIT","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1764268115192678700,"endTimeUnixNano":1764268115193505000,"attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.query.text","value":{"stringValue":"commit"}},{"key":"db.operation.name","value":{"stringValue":"COMMIT"}},{"key":"pgx.rows_affected","value":{"intValue":0}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"f73202f663873ddd","parentSpanId":"5f1033a143b05c16","traceState":"","name":"createNewTransaction","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115190243300,"endTimeUnixNano":1764268115190836500,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"6b4dbd91ad326b4e","parentSpanId":"5f1033a143b05c16","traceState":"","name":"LookupNamespacesWithNames","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115190902500,"endTimeUnixNano":1764268115191907000,"attributes":[{"key":"spicedb.internal.datastore.shared.names","value":{"stringValue":"[\"link\",\"user\"]"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"1e0ac69ebd77b037","parentSpanId":"5f1033a143b05c16","traceState":"","name":"WriteRelationships","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1764268115191940600,"endTimeUnixNano":1764268115192672300,"attributes":[{"key":"spicedb.internal.datastore.shared.mutations","value":{"intValue":1}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}},{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"5f1033a143b05c16","parentSpanId":"40ee0bc9a4a8927a","traceState":"","name":"authzed.api.v1.PermissionsService/WriteRelationships","kind":"SPAN_KIND_SERVER","startTimeUnixNano":1764268115189315800,"endTimeUnixNano":1764268115193743400,"attributes":[{"key":"rpc.method","value":{"stringValue":"WriteRelationships"}},{"key":"rpc.system","value":{"stringValue":"grpc"}},{"key":"server.address","value":{"stringValue":"10.244.0.112"}},{"key":"server.port","value":{"intValue":51326}},{"key":"rpc.grpc.status_code","value":{"intValue":0}},{"key":"rpc.service","value":{"stringValue":"authzed.api.v1.PermissionsService"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""},"events":[{"timeUnixNano":1764268115189501200,"attributes":[],"droppedAttributesCount":0,"name":"spicedb.internal.service.relationships.mutations_validated"},{"timeUnixNano":1764268115190841600,"attributes":[],"droppedAttributesCount":0,"name":"spicedb.internal.service.relationships.preconditions.validated"},{"timeUnixNano":1764268115191929600,"attributes":[],"droppedAttributesCount":0,"name":"spicedb.internal.service.relationships.updates.validated"},{"timeUnixNano":1764268115191932200,"attributes":[],"droppedAttributesCount":0,"name":"spicedb.internal.service.relationships.preconditions.validated"},{"timeUnixNano":1764268115192673000,"attributes":[],"droppedAttributesCount":0,"name":"spicedb.internal.service.relationships.written"},{"timeUnixNano":1764268115193541600,"attributes":[],"droppedAttributesCount":0,"name":"spicedb.internal.service.relationships.readwrite_executed"}]}],"instrumentationLibrary":{"name":"github.com/exaring/otelpgx","version":"v0.9.3"}}]},{"resource":{"attributes":[{"key":"host.name","value":{"stringValue":"shortlink-link-metadata-66d4ccb6bc-ntsg8"}},{"key":"os.description","value":{"stringValue":"Alpine Linux 3.22.2 (Linux shortlink-link-metadata-66d4ccb6bc-ntsg8 6.12.57-talos #1 SMP Wed Nov  5 12:59:35 UTC 2025 x86_64)"}},{"key":"os.type","value":{"stringValue":"linux"}},{"key":"process.command_args","value":{"stringValue":"[\"./app\"]"}},{"key":"process.executable.name","value":{"stringValue":"app"}},{"key":"process.executable.path","value":{"stringValue":"/app/app"}},{"key":"process.owner","value":{"stringValue":"golang"}},{"key":"process.pid","value":{"intValue":7}},{"key":"process.runtime.description","value":{"stringValue":"go version go1.25.4 X:arenas,cgocheck2,newinliner,rangefunc,jsonv2,greenteagc linux/amd64"}},{"key":"process.runtime.name","value":{"stringValue":"go"}},{"key":"process.runtime.version","value":{"stringValue":"go1.25.4 X:arenas,cgocheck2,newinliner,rangefunc,jsonv2,greenteagc"}},{"key":"service.version","value":{"stringValue":""}},{"key":"telemetry.sdk.language","value":{"stringValue":"go"}},{"key":"telemetry.sdk.name","value":{"stringValue":"opentelemetry"}},{"key":"telemetry.sdk.version","value":{"stringValue":"1.38.0"}},{"key":"service.name","value":{"stringValue":"shortlink-metadata"}}],"droppedAttributesCount":0},"instrumentationLibrarySpans":[{"spans":[{"traceId":"4eacb22e0093cab9e41b7a57b2451567","spanId":"02a5721fb39c010b","parentSpanId":"bf1086acf6d79d34","traceState":"","name":"link.link.created.v1 receive","kind":"SPAN_KIND_CONSUMER","startTimeUnixNano":1764268115106485800,"endTimeUnixNano":1764268115106514700,"attributes":[{"key":"messaging.system","value":{"stringValue":"kafka"}},{"key":"messaging.destination.kind","value":{"stringValue":"topic"}},{"key":"messaging.destination.name","value":{"stringValue":"link.link.created.v1"}},{"key":"messaging.operation","value":{"stringValue":"receive"}},{"key":"messaging.message.id","value":{"stringValue":"2"}},{"key":"messaging.kafka.source.partition","value":{"intValue":0}},{"key":"pyroscope.profile.id","value":{"stringValue":"02a5721fb39c010b"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":0,"message":""}}],"instrumentationLibrary":{"name":"go.opentelemetry.io/contrib/instrumentation/github.com/IBM/sarama/otelsarama","version":"0.43.0"}}]}]}