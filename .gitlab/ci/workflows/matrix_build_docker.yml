# NOTE:
# APPLICATION     - Name application
# REGISTRY_IMAGE  - Registry image
# DOCKERFILE_PATH - Path to Dockerfile
# CMD_PATH        - Path to a binary file
.matrix_build_docker_ui:
  parallel:
    matrix:
      - APPLICATION: link-ui
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/ui
        DOCKERFILE_PATH: ui/ops/Dockerfile
        DOCKERFILE_ARGS: >-
          --build-arg API_URI=${API_URI}
          --build-arg NEXT_PUBLIC_API_URI=${NEXT_PUBLIC_API_URI}

.matrix_build_docker:
  parallel:
    matrix:
      - APPLICATION: bff
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/bff
        DOCKERFILE_PATH: bff/ops/Dockerfile
      - APPLICATION: proxy
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/proxy
        DOCKERFILE_PATH: proxy/ops/Dockerfile
      - APPLICATION: link
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/link
        DOCKERFILE_PATH: proxy/ops/Dockerfile
      - APPLICATION: metadata
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/metadata
        DOCKERFILE_PATH: proxy/ops/Dockerfile
