# NOTE:
# APPLICATION     - Name application
# REGISTRY_IMAGE  - Registry image
# WORKDIR         - Working directory
# DOCKERFILE_PATH - Path to Dockerfile
# DOCKERFILE_ARGS - Additional Docker build arguments
.matrix_build_docker_ui:
  parallel:
    matrix:
      - APPLICATION: ui
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/ui
        WORKDIR: boundaries/$APPLICATION
        DOCKERFILE_PATH: ops/Dockerfile
        DOCKERFILE_ARGS: >-
          --build-arg API_URI=${API_URI}
          --build-arg NEXT_PUBLIC_API_URI=${NEXT_PUBLIC_API_URI}

.matrix_build_docker:
  parallel:
    matrix:
      - APPLICATION: bff
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/$APPLICATION
        WORKDIR: boundaries/$APPLICATION
        DOCKERFILE_PATH: ops/Dockerfile
      - APPLICATION: proxy
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/$APPLICATION
        WORKDIR: boundaries/$APPLICATION
        DOCKERFILE_PATH: ops/Dockerfile
      - APPLICATION: link
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/$APPLICATION
        WORKDIR: boundaries/$APPLICATION
        DOCKERFILE_PATH: ops/Dockerfile
      - APPLICATION: metadata
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/$APPLICATION
        WORKDIR: boundaries/$APPLICATION
        DOCKERFILE_PATH: ops/Dockerfile
