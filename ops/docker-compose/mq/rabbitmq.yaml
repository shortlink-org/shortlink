version: '2.4'

x-network: &network
  networks:
    - simple
  dns:
    - "10.5.0.2"
  dns_search: coredns

services:

  rabbitmq:
    <<: *network
    image: rabbitmq:3.8-management-alpine
    hostname: rabbitmq
    container_name: rabbitmq
    ports:
      - "5672:5672"
      - "15672:15672"
    depends_on:
      - fluentd
      - coredns
