include:
  - local: /ops/gitlab/workflows/rules.yml

variables:
  DOCKER_DRIVER: overlay2
  DOCKER_HOST: tcp://docker:2375

# DEFAULT ==============================================================================================================
default:
  services:
    - name: docker:19.03-dind
      alias: localhost # necessary for correct addressing to services running in docker

code_intelligence_go:
  stage: .pre
  image: sourcegraph/lsif-go:v1
  allow_failure: true # recommended
  script:
    - lsif-go
  artifacts:
    reports:
      lsif: dump.lsif
  rules:
    - when: always
