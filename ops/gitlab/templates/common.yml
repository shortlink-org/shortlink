include:
  - local: /ops/gitlab/workflows/rules.yml

variables:
  DOCKER_DRIVER: overlay2
  DOCKER_HOST: tcp://docker:2375

# DEFAULT ==============================================================================================================
default:
  services:
    - name: docker:19.03-dind
      alias: localhost # necessary for correct addressing to services running in docker

code_navigation_go:
  stage: .pre
  image: golang:1.14-buster
  script:
    - go get -u github.com/sourcegraph/lsif-go/cmd/lsif-go
    - lsif-go
  artifacts:
    reports:
      lsif: dump.lsif
