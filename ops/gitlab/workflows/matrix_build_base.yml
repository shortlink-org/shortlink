# NOTE:
# APPLICATION     - Name application
# REGISTRY_IMAGE  - Registry image
# DOCKERFILE_PATH - Path to Dockerfile
# CMD_PATH        - Path to binary file
.matrix_build_base:
  parallel:
    matrix:
      - APPLICATION: api
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/api
        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
        CMD_PATH: "--build-arg ./cmd/api"
#      - APPLICATION: auth
#        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/auth
#        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
#        CMD_PATH: "./cmd/auth"
#      - APPLICATION: notify
#        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/notify
#        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
#        CMD_PATH: "./cmd/notify"
#      - APPLICATION: csi
#        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/csi
#        DOCKERFILE_PATH: ops/dockerfile/csi.Dockerfile
#      - APPLICATION: logger
#        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/logger
#        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
#        CMD_PATH: "./cmd/logger"
#      - APPLICATION: metadata
#        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/metadata
#        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
#        CMD_PATH: "./cmd/metadata"
      - APPLICATION: link
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/link
        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
        CMD_PATH: "--build-arg ./cmd/link"
#      - APPLICATION: proxy
#        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/proxy
#        DOCKERFILE_PATH: ops/dockerfile/proxy.Dockerfile
#        CMD_PATH: ""
#      - APPLICATION: bot
#        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/bot
#        DOCKERFILE_PATH: ops/dockerfile/bot.Dockerfile
      - APPLICATION: kafka-to-elasticsearch
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/kafka-to-elasticsearch
        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
        CMD_PATH: "--build-arg ./internal/services/knative/sync-search/kafka-to-elasticsearch"
      - APPLICATION: rabbitmq-to-elasticsearch
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/rabbitmq-to-elasticsearch
        DOCKERFILE_PATH: ops/dockerfile/go.Dockerfile
        CMD_PATH: "--build-arg ./internal/services/knative/sync-search/rabbitmq-to-elasticsearch"
