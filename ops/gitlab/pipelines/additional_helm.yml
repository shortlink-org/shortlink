include:
  - local: /ops/gitlab/templates/common.yml

stages:
  - deploy

# K8S ==================================================================================================================
#test:
#  stage: deploy
#  variables:
##    RELEASE_NAME: test
#    RELEASE_NAME: ${CI_PROJECT_NAME}-test
##    HELM_PATH: ops/Helm/addons/cert-manager
#    HELM_PATH: ops/Helm/${CI_PROJECT_NAME}-logger
#    HELM_ARG: '--set serviceAccount.create=false --set deploy.annotations.app\.gitlab\.com\/env=$CI_ENVIRONMENT_SLUG --set deploy.annotations.app\.gitlab\.com\/app=$CI_PROJECT_PATH_SLUG'
#  trigger:
#    include:
#      - local: 'ops/gitlab/pipelines/helm_deploy.yml'
#    strategy: depend
#  needs: []
#  rules:
#    - when: always

#cert-manager:
#  stage: deploy
#  variables:
#    RELEASE_NAME: cert-manager
#    HELM_PATH: ops/Helm/addons/cert-manager
#    HELM_ARG: '--set serviceAccount.create=false --set deploy.annotations.app\.gitlab\.com\/env=$CI_ENVIRONMENT_SLUG --set deploy.annotations.app\.gitlab\.com\/app=$CI_PROJECT_PATH_SLUG'
#    HELM_NAMESPACE: cert-manager
#  trigger:
#    include:
#      - local: 'ops/gitlab/pipelines/helm_deploy.yml'
#    strategy: depend
#  needs: []
#  rules:
#    - when: always
