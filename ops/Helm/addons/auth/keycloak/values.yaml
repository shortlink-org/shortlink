# Common default values for keycloak.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.


# Kratos ===============================================================================================================
keycloak:
  enabled: true

  global:
    storageClass: local-path

  auth:
    adminUser: user
    # adminPassword: get-from-secret

  spi: {}
#    hostnameVerificationPolicy: "ANY"
#    truststorePassword: "changeit"

  production: false
  proxy: edge

  livenessProbe:
    enabled: false

  readinessProbe:
    enabled: false

  resources:
    limits:
      cpu: 100m
      memory: 512Mi
    requests:
      cpu: 20m
      memory: 64Mi

  terminationGracePeriodSeconds: 60

  tls:
    enabled: false
    autoGenerated: false

  ingress:
    enabled: true
    ingressClassName: nginx
    hostname: keycloak.shortlink.best

    annotations:
      cert-manager.io/cluster-issuer: cert-manager-production
      nginx.ingress.kubernetes.io/enable-modsecurity: "false"
      nginx.ingress.kubernetes.io/enable-owasp-core-rules: "true"
      nginx.ingress.kubernetes.io/enable-opentelemetry: "true"

    extraTls:
      - secretName: keycloak-ingress-tls
        hosts:
        - keycloak.shortlink.best

  rbac:
    create: true

  metrics:
    enabled: true

    serviceMonitor:
      enabled: true

    prometheusRule:
      enabled: true

  keycloakConfigCli:
    enabled: false

  postgresql:
    image:
      # Keycloak support only postgresql 15
      tag: 15.4.0-debian-11-r54
